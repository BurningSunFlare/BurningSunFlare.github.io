<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="console.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon"; type="image/png"; href="/Images/Icon/Main.png">
  <title>JSON Box System with Image Upload and Save/Load</title>
  <style>


/* cyrillic-ext */
@font-face {
  font-family: 'Source Code Pro';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/sourcecodepro/v23/HI_diYsKILxRpg3hIP6sJ7fM7PqPMcMnZFqUwX28DMyQtMRrTEUc.woff2) format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
/* cyrillic */
@font-face {
  font-family: 'Source Code Pro';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/sourcecodepro/v23/HI_diYsKILxRpg3hIP6sJ7fM7PqPMcMnZFqUwX28DMyQtM1rTEUc.woff2) format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
/* greek-ext */
@font-face {
  font-family: 'Source Code Pro';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/sourcecodepro/v23/HI_diYsKILxRpg3hIP6sJ7fM7PqPMcMnZFqUwX28DMyQtMVrTEUc.woff2) format('woff2');
  unicode-range: U+1F00-1FFF;
}
/* greek */
@font-face {
  font-family: 'Source Code Pro';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/sourcecodepro/v23/HI_diYsKILxRpg3hIP6sJ7fM7PqPMcMnZFqUwX28DMyQtMprTEUc.woff2) format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
/* vietnamese */
@font-face {
  font-family: 'Source Code Pro';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/sourcecodepro/v23/HI_diYsKILxRpg3hIP6sJ7fM7PqPMcMnZFqUwX28DMyQtMZrTEUc.woff2) format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB;
}
/* latin-ext */
@font-face {
  font-family: 'Source Code Pro';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/sourcecodepro/v23/HI_diYsKILxRpg3hIP6sJ7fM7PqPMcMnZFqUwX28DMyQtMdrTEUc.woff2) format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
/* latin */
@font-face {
  font-family: 'Source Code Pro';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/sourcecodepro/v23/HI_diYsKILxRpg3hIP6sJ7fM7PqPMcMnZFqUwX28DMyQtMlrTA.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

.fade-in
{
    opacity: 0;
    transition: opacity 3s ease-in-out;
}

.video-left, .video-right
{
    position: fixed;
    bottom: 20px; /* Ensure consistent vertical alignment */
}

.centered
{
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

.visible
{
    display: block; /* Make the element visible */
    opacity: 1;
}
aside
{
    width:30%;
    float:left;
    padding:10px;
    text-align: center;
}
section
{
    width:25%;
    float:left;
    padding:10px;
    text-align: center;
}
article
{
    width:25%;
    float:left;
    padding:10px;
    text-align: center;
}
footer
{
    clear:both;
}
footer::after 
{
    content: "";
    display: table;
    clear: both;
}

@media screen and ( max-width:600px )
{
    aside, section, article
    {
        width:100%;
    }
}



body
{
  background: linear-gradient(to left, #0e052e, #1c1c1c);
  -webkit-background-clip: text;
  background-clip: text;
  color: lightskyblue;
  animation: body 10s ease-in-out infinite;
  background-size: 400% 100%;
  margin: 0; /* Remove default margin */
  padding: 0; /* Remove default padding */
  box-shadow: 5px 10px 8px hsl(241, 86%, 11%)
}

body.non-chromium
{
  background: linear-gradient(to left, #0e052e, #1c1c1c);
}

div{box-shadow: 5px 10px 8px hsl(241, 86%, 11%)}

.console
{
  clear: both;
  box-shadow:none;
  margin-top: auto; /* Pushes it to the bottom */
}

@keyframes console-line-cursor-blink {
    0% {color: #000;}
    49% {color: #000;}
    50% {color: #fff;}
    100% {color: #fff;}
}


.console-line-cursor:after {
  content:"\2588";
  animation-name:"console-line-cursor-blink";
  animation-duration:500ms;
  animation-timing-function:steps(start,end);
  animation-iteration-count:infinite
}

.relah
{
  background-image: url(/Images/Relah.webp);
  display: block;
  margin: 0 auto;
}
.esc
{
  display: block;
  margin: 0 auto;
}

.papa
{
  background-image: url(/Images/ppQuillBanner.gif);
  display: block;
  margin-top:150px;
  margin: 15px auto;
  height: 100%;
  padding-top: 150px;
  background-repeat: no-repeat;
  background-position: center;
}

.breaklines
{
  width:100%;
  display:block;
  margin-top:100px;
  margin: 550px auto;
}

.noal p
{
  text-align: left;
  background-color: #000;
  color:#00ff4c;
  font-family:"Source Code Pro";
  font-size:20px;
  margin:0;
  word-break:break-all
}

footer p{ text-align: center; }

@keyframes body {
    0%,100% {
        background-position: 0 0;
    }

    50% {
        background-position: 100% 0;
    }
}
    ::placeholder{ color:cornflowerblue }
    .box { border: 1px solid #34179d; padding: 10px; margin: 10px; background-color: hsl(211, 94%, 6%); box-shadow: 5px 10px 8px hsl(241, 86%, 11%); background: transparent;background-image: none; }
    .collection, .item { border: 1px dashed #2959c9; padding: 5px; margin-top: 5px; box-shadow: 5px 6px 8px #0d1f4885 }
    .inbox
    {
      background-color: #56209e43;
      color: rgb(147, 194, 255);
      border: 2px solid #4a297e;
      border-radius: 8px;
    }

    .inbox:hover
    {
      border-color: #7426b3;
    }

    .inbox:focus
    {
        outline: 2px solid #7426b3;
        font-weight:bold;
        color: rgb(147, 255, 194);
    }

    .button3
    {
      background-color: #56209e43;
      color: rgb(147, 194, 255);
      border: 2px solid #4a297e;
    }

    .button3:hover
    {
      border-color: lightblue;
    }


    .short
    {
      width: 75px;
    }
    .semishort
    {
      width: 90px;
    }
    .semishort:focus
    {
      color:lightblue;
      background-color: #42005c;
    }
    .supershort
    {
      width: 36px;
    }
    .tick
    {
      accent-color: green;
    }
    .tick:not(:checked)
    {
      -webkit-appearance: none;
      -moz-appearance: none;
      -o-appearance: none;
      appearance:none;
      width: 10px;
      height: 10px;
      background-color: rgb(171, 9, 9);
      border: 0px dotted #931414;
      color: red;
      content: "x";
    }
    
.rainbow_text_animated
{
    background: linear-gradient(to right, #6666ff, #0099ff , #00ff00, #ff3399, #6666ff);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: rainbow_animation 10s ease-in-out infinite;
    background-size: 400% 100%;
}
.rainbow
{
    text-align: center;
    text-decoration: underline;
    font-size: 32px;
    font-family: monospace;
    letter-spacing: 5px;
}

@keyframes rainbow_animation {
    0%,100% {
        background-position: 0 0;
    }

    50% {
        background-position: 100% 0;
    }
}
hr
{
  background: linear-gradient(to right, #3b1194, #22095a);
  height: 5px;
  border:0
}

a
{
    text-align: center;
    color:rgb(162, 100, 237);
}
a:hover
{
    text-align: center;
    color:rgb(202, 165, 245);
}
.frame
{
  background-color: #56209e43;
  border: none;
  border-radius: 2px;
  color: rgb(22, 67, 127);
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  transition-duration: 0.4s;
}
.frame:hover {
  background-color: #0e11106d; /* Green */
  color: white;
}
.upload
{
  background-color: #56209e43; /* Green */
  border: none;
  border-radius: 2px;
  color: rgb(147, 194, 255);
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  transition-duration: 0.4s;
}
.upload:hover {
  background-color: #0e11106d; /* Green */
  color: white;
}
.button1
{
  background-color: #04AA6D; /* Green */
  border: none;
  border-radius: 2px;
  color: rgb(22, 67, 127);
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  transition-duration: 0.4s;
}
.button1:hover {
  background-color: #0e1110; /* Green */
  color: white;
}

.button2
{
  background-color: #04AA6D; /* Green */
  border: none;
  width: 120px;
  height: 60px;
  margin-top: 25px;
  border-radius: 2px;
  color: rgb(22, 67, 127);
  padding: 20px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  transition-duration: 0.4s;
}
.button2:hover {
  background-color: #2f055f; /* Green */
  color: rgb(0, 146, 250);
}

.tooltip .tooltiptext {
  width: 120px;
  top: 100%;
  left: 50%;
  margin-left: -60px; /* Use half of the width (120/2 = 60), to center the tooltip */
}

h2 {text-align: center;}
.hidden { display: none !important; }
  </style>
</head>
<body>
<hr>
<h2 class=>Ultrasound</h2>
<hr>
<div>
  <!-- <button onclick="toggleMode()" class="button1">Toggle Edit/Preview Mode</button> -->
  <!-- button onclick="createBox()" class="button1">Create Box</button -->
  
  <button onclick="uploadJSON()" class="button1" id="daclear">Upload JSON</button>
  <button onclick="uploadJSONEdit()" class="button1" id="daclear2">Upload JSON (Edit mode)</button>
  <input type="file" id="fileInput" class="hidden" accept=".json" onchange="loadJSON(this.files)">
  <input type="file" id="fileInputEdit" class="hidden" accept=".json" onchange="loadJSONEdit(this.files)">
  <button onclick="downloadJSON()" class="button1">Save JSON</button>
  Themer: <select id="themer" class="inbox semishort">
    <option value="1" selected>Default</option>
    <option value="2">Bubblegum Theme</option>
</select>
</div>
<p class = "hidden mainboy"></p>
<div id="mainBox" class="box">
  <h3 id="mainTitle" contenteditable="true">Default Title</h3>
  <img id="mainImage" src="/Images/Icon/Kittyd.gif" alt="Main Image" width="256" height="256" class="frame">
  <br>
  <input id="buttonHide" type="file" onchange="updateImage(this, 'mainImage')" class="upload">
  <p id="mainCredits" contenteditable="true">This is where the credits go</p>
  <button class="button3" onclick="addCollection()">Add Collection</button>
  <div id="collectionsContainer"></div>
</div>

<div>
  <hr>
  Modded Beepbox to use: <select id="beeps" class="inbox semishort">
    <option value="1" selected></option>
    <option value="2">Ultrabox</option>
    <option value="3">Abyssbox</option>
    <option value="4">Slarmoo's Box</option>
    <option value="5">Unbox</option>
    <option value="6">Baribox</option>
    <option value="7">VoxBox</option>
    <option value="8">AxoBox</option>
    </select>
  <br>
  <input class="inbox" type="text" id="exportUrlInput" placeholder="Main Url" class="tooltip">
  <span class="tooltiptext">Grab your base url. Abyssbox or Ultrabox for example, then click Load Samples</span>
  <br>
  <button onclick="exportURLs()" class = "button3">Load Samples</button>
</div>
<footer>
<hr>
<h2>DISCLAIMER:</h2>
<p>I do NOT have a server that saves any DATA, nor do I have anything that goes through networking.
Github has STATIC websites, and I do not have money for an actual server lol.
I made this entirely with the purpose of freedom to do what you want, and I hold no consequences to what people do with this.<p>
<h2>TIPS:</h2>
<ol>
<li>Do not use the enter key to try and create a line break
  <br>
  LIKE
  <br>
  THIS
  <br>
  Instead, you should type LIKE THIS as LIKE&lt;br&gt;THIS. When you use br, you are telling the webpage to line break aka pressing enter on your keyboard. <b>casing is important!</b>
  <li>&lt;b&gt; <b>PUT TEXT LIKE THIS TO MAKE IT BOLD!</b> &lt;/b&gt;</li>
  <li>&lt;i&gt; <i>PUT TEXT LIKE THIS TO MAKE IT ITALICS!</i> &lt;/i&gt;</li>
  <li>&lt;u&gt; <u>PUT TEXT LIKE THIS TO MAKE IT UNDERLINE!</u> &lt;/u&gt;</li>
  <p>Note: These are actually exploits I found out lol. I won't patch them out, why? Cos you can make cool ass themes!
    <br>
    HUGE NOTE: THIS ALSO PROBABLY MEANS ANYONE CAN RUN JAVASCRIPT IN THESE JSON FILES. OPEN UP YOUR JSON FILES AND SEARCH "script" TO SEE IF PEOPLE WOULD INJECT SOMETHING! More than likely, no one would, and there's probably nothing people can do to seriously screw you up. I would find it funny though if someone just embedded PACMAN into this LMAO.
  </p>
 </li>
</ol>
<br>

<!-- p>Please know that im still very new to html and of it's forms.
  You cannot edit your files directly on the website, after it's been created. Yeah, lame.
  I made a seperate website that was just intended for me and a friend so we can edit our json files.
  My original thought was that I didn't want people to skid others work and discredit anyone.
  I am now making the decision to make it so you can edit it straight through here. Just give me some time to do this.
  In the meantime, you can use the outdated dev site I created. The password is Pineapple: <a href="/Websites/ultrasoundEdit.html">Ultrasound Editor</a>
  If you're using Firefox or safari, or anything non chromium based, prepare to LAG HARD.
</p -->

<image class="hotdog" id="hotdog" src="/Images/Icon/hotdog.png" width="256" height="256"></image>
    <br>
    <video id="cressyKiss" class="hidden fade-in" src="/Videos/Cressy Kiss.webm" width="512" height="512" loop muted autoplay></video>
    <a id="linkofbulk" class ="hidden" href=/Websites/sample_extractor.html>Modded Sample Extractor</a>
    <audio id="explosionSound" class="hidden">
        <source src="/Sounds/deltarune-explosion.mp3" type="audio/mpeg">
    </audio>

    <audio id="relahSong" class="hidden">
      <source src="/Sounds/relah thing.wav" type="audio/mpeg">
  </audio>
  <audio id="woof1" class="hidden">
    <source src="/Sounds/ROH.wav" type="audio/mpeg">
  </audio>
  <audio id="woof2" class="hidden">
    <source src="/Sounds/RAHW.wav" type="audio/mpeg">
  </audio>
  <audio id="woof3" class="hidden">
    <source src="/Sounds/ShakeShakeRelah.wav" type="audio/mpeg">
  </audio>
  <audio id="rartSong" class="hidden">
    <source src="/Sounds/RAT.mp3" type="audio/mpeg">
  </audio>
  <audio id="crescentSong" class="hidden">
    <source src="/Sounds/Crescent Meow Bark.wav" type="audio/mpeg">
  </audio>
  <audio id="angrySong" class="hidden">
    <source src="/Sounds/eROAR.wav" type="audio/mpeg">
  </audio>
  <audio id="WAHH" class="hidden">
    <source src="/Sounds/YIPPIE.mp3" type="audio/mpeg">
  </audio>
  <audio id="papamimi" class="hidden">
    <source src="/Sounds/papamimi.mp3" type="audio/mpeg">
  </audio>

    <audio id="car" class="hidden">
        <source src="/Sounds/car crash.mp3" type="audio/mpeg">
    </audio>

<aside>
  <h2 class="toUnhide hidden">Twitch Kat!</h2>
  <image class="toUnhide hidden" id="me" src="/Images/Crescent pfp.png" width="256" height="256"></image>
  <p class="toUnhide hidden">
    <i>Aka: Firefly, BurningSunFlare, Crescent( The umbreon spitting rainbow! ), Mr Orange Pony, AND 20 MORE ALIASES!</i>
    <br>
    I'm just some wacky guy who takes interest in xbox360 Source Engine Modding(Tf2, L4D2),
    and even do a little funny rom hacking here and there such as Fire emblem!
    <br>
    I really hope this website will be useful to some people. I know you can't exactly edit once you save your json file,
    but just contact me @twitchkat on discord, and I can share you something that you can edit your own stuff.
  </p>
</aside>
<section>
<h2 class="toUnhide hidden">Boohemian!</h2>
<image class="toUnhide hidden" id = "BDasher" src="/Images/Bdasher.jpg" width="256" height="256"></image>
<p class="toUnhide hidden">
  <i>aka BDasher</i>
  A canadian dude who I call british because it's funny.
  <br>
  <i>
    Oh, right. I gotta say some stuff huh?  
  </i>
  <br>
  In that case, he's a pretty cool dude! Loves jazz, and probably the reason my interest in music spiked WAY UP. I mean hell, I made this website not really for myself lol.
</p>

</section>

<article>
  <h2 class="toUnhide hidden">Rart!</h2>
  <image class="toUnhide hidden" id= "rart" src="/Images/Rart.png" width="256" height="256"></image>
  <p class="toUnhide hidden">
    Hi Rart!<br>
    Hi Rart!<br>
    Hi Rart!<br>
    <b>
      I SAID HEY RART. SAY HI.
    </b>
    <br>
    <h3 class="toUnhide hidden">
      OOGA BOOGA DOOGA BOO, IM GONNA MAKE YOU HONK SCHNOO
    </h3>
  </p>
</article>
<br>
<div class="breaklines toUnhide hidden">
</div>

<div class="toUnhide hidden papa">
  <image class="esc toUnhide hidden" id="ppquill" src="/Images/ppQuill.gif"></image>
  <p class="toUnhide hidden">"How the fuck did I get here?!?! Someone help me! Let me out!"</p>
</div>
<div class="relah toUnhide hidden">
  <image class="esc toUnhide hidden" id="esc" src="/Images/RelahBanner.gif"></image>
</div>
<div id="console" class="console noal toUnhideClick hidden">
<hr>
</div>

</footer>

<script>


const isChromium = !!window.chrome;
if ( !isChromium )
{
  console.log("This browser is not intended for firefox or safari or anything not chromium based");
  document.body.classList.add('non-chromium');
}

const context = new AudioContext();

function loadSample( url )
{
  return fetch( url )
    .then( response => response.arrayBuffer() )
    .then( buffer => context.decodeAudioData( buffer ) );
}

let activeSources = new Map();

function playSample(sampleBuffer, sampleNote, noteToPlay, sampleId)
{
  const source = context.createBufferSource();
  source.buffer = sampleBuffer;
  source.playbackRate.value = 2 ** ((noteToPlay - sampleNote) / 12);
  source.connect(context.destination);
  source.start(0);

  if (sampleId)
  {
    if (!activeSources.has(sampleId))
    {
      activeSources.set(sampleId, []);
    }
    activeSources.get(sampleId).push(source);
  }

  source.onended = () =>
  {
    if (sampleId)
    {
      // Remove the source from the array
      const sources = activeSources.get(sampleId);
      if (sources)
      {
        const index = sources.indexOf(source);
        if (index > -1)
        {
          sources.splice(index, 1);
        }
        // If no sources remain, delete the sampleId entry
        if (sources.length === 0)
        {
          activeSources.delete(sampleId);
        }
      }
    }
  };
}

function stopSample( sampleId )
{
  const sources = activeSources.get(sampleId);
  if (sources && Array.isArray(sources))
  {
    sources.forEach(source =>
    {
      try
      {
        source.stop(0);
      }
      catch (err)
      {
        console.error("Error stopping source:", err);
      }
    });
    activeSources.delete(sampleId);
  }
}

const sampleUrls =
[

];

  let isEditMode = true;
  let totalitems = 1;
  let totalcontainers = 0;
  var isPlaying = false;
  var isWaiting = false;
  var menu = document.getElementById("themer");
  var beeps = document.getElementById("beeps");
  var urls = document.getElementById("exportUrlInput");

  beeps.addEventListener( "change", function ()
  {
    urlChange( beeps.value )
  }
  );

  function urlChange( value ) 
  {
    switch( value )
    {
      case "1":
        urls.value = "";
      break;
      case "2":
        urls.value = "https://ultraabox.github.io/testing/#u6N08Untitled00000n310s0k02l00e03t1Ua7g0fj07r1O_U00000000i0o321T1v0pu39f0000q0wB162110O01d080A0F0B0Q7er4Pa610R0000E3c0ba61a628T1v0pu63f0000q0wB171110O01d080A1F1B4Qa4i4Pea3bR0000E2c0b962aT6v0pu75f010n900q08420O0d030WO00h0E1c02cT2v0pu15f180q0040O0d030w0h0E0c0b4h400000000h4g000000014h000000004h400000000p16000000";
      break;
      case "3":
        urls.value = "https://choptop84.github.io/abyssbox-app/#a2N08UntitledY04nonen311s0k02l00e03t1Ua7g0fj07r3O_U0000000000i0o321T0v0pu86f0000q00000B1900Oa1d350w60h3y0000000000000g000000E1c0bcT5v0pulif031742e42k400q0000AD010q50002Q0Oa2ud880HU2h80000020p00h3E1c0c09T5v0pua5f060lc2dd2j02e02fd17800q00008540Oaad260HK_Sziiirrqih99h0E0c0T2v0pu15f180q0000040Oad030w0h0E0c0Tav0pu43f0000q0000w510Oa1d030E0c0b4h400000000h4g000000014h000000004h400000000h4g00000000p1900000f_M0";
      break;
      case "4":
        urls.value = "https://slarmoo.github.io/slarmoosbox/website/#s4N08Untitledn311s0k02l00e03t2ma7g0fj07r1O_c000U0000000000i0o321T1v0pui3f184qd53u10Oa77rd580AcF0B3Q4545PffffR0000E0c0T5v0pudbf151qo5120O01d040HXQRRJJHJAAArq8h0E0c0T1v0puc8f134q050O01d230A1F0B2Q64d4Pb660R0000E1c06270X0aT2v0pu15f180q040O0d030w0h0E0c0Tav0puihf0000qh510Oa7f8d070E0c0b4h400000000h4g000000014h000000004h400000000h4g00000000p1900000f_M0";
      break;
      case "5":
        urls.value = "https://un-conventional.github.io/#U1N07Unnamedn310s0k02l00e03t1Ua7g0fj07r3O_U00000000i0o321T0v0pud2f0000q0A010l5000Oad080w40h1y00000000000008000000E1c0baT1v0pupaf012ta00q0C010r5000Oa7d180A8F8B8Q56ciPda58R0000E4c0ba62a63k7aT1v0puk4f172q8520Oa1d230A9F5B5Q6f4nPa883R0000E1c078T4v0puq0f1a0q050Oa1z8888onapap4oSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0c0b4h400000000h4g000000014h000000004h400000000p16000000";
      break;
      case "6":
        urls.value = "https://andrebariani.github.io/baribox/#u5N08Untitledn310s0k02l00e03t1Ua7g0fj07r3O_U00000000i0o321T1v0pu37f0000qwB16110Oa1d030AbF6B0Q4dirP9996R0000E2c0b8638T1v0pu77f010o900qsd15G3100oaad030A1F9B4Q5447Pfb94R0000E2c062c63eT1v0pu9bf020m813400qsd03I3300dald350A9F3B5Qa86ePfd78R0000E0c0T4v0puf0f1a0qsd31w15007a1z8888onapap4oSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0c0b4h400000000h4g000000014h000000004h400000000p16000000";
      break;
      case "7":
        urls.value = "https://voxeldeev.github.io/voxbox/website/#v2N08Untitledn310s0k02l00e03t1Ua7g0fj07r3O_U00000000i0o321T1v0pu64f0000qwB16010Oa1d080A1F2B5Q64g4Pe64bR0000E3c0b9062a0790T0v0pu98f153q8720Oa71d4a0w50h2y0000000000000w000000E0c0T1v0pu31f0000qwB19110Oa1d080AbF6B2Q4cfrP7b72R0000E3c0ba063907o0T2v0pu15f180q040Oad030w0h0E0c0b4h400000000h4g000000014h000000004h400000000p16000000";
      break;
      case "8":
        urls.value = "https://sxomus.neocities.org/axobox/#u5N08Untitledn310s0k02l00e03t1Ua7g0fj07r3O_U00000000i0o321Tbv0puhaf020x815600qiD000110p7200Oa50d040AtF1B0Q4568afPdfa796R333333E0c0T1v0pu39f0000qwB16210Oa1d080A0F0B0Q7er4Pa610R0000E3c0ba61a628T3v0iui2f0000q0B010j5000Oaad190SXi9980000000000h0E1c0b9T4v0puf0f1a0q050Oa1z8888onapap4oSBKSJJAArriiiiii07JCABrzrrrrrrr00YrkqHrsrrrrjr005zrAqzrjzrrqr1jRjrqGGrrzsrsA099ijrABJJJIAzrrtirqrqjqixzsrAjrqjiqaqqysttAJqjikikrizrHtBJJAzArzrIsRCITKSS099ijrAJS____Qg99habbCAYrDzh00E0c0b4h400000000h4g000000014h000000004h400000000p16000000";
      break;
      default: break;
    }
  }


  
  window.onload = function ()
  {
    const savedValue = getCookie("selectedTheme");
    if( savedValue )
    {
      menu.value = savedValue;
      generateTheme( savedValue );
    }
  };

  menu.addEventListener( "change", function ()
  {
    setCookie( "selectedTheme", menu.value, 365 );
    generateTheme( menu.value );
  }
  );
  
  function generateTheme( value ) 
  {
    switch( value )
    {
      case "1":
        defaultTheme();
      break;
      case "2":
        bubbleTheme();
      break;
      case "3":
        console.log("This theme does not exist");
      break;
      default: alert("What the sigma? Theme broken?");
    }
  }
  
  function setCookie( name, value, days )
  {
    const date = new Date();
    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
    document.cookie = `${name}=${value};expires=${date.toUTCString()};path=/`;
  }
  
  function defaultTheme()
  {
    let datheme = 
    [
      "::placeholder{ color:cornflowerblue }",
      ".box {  border: 1px solid #34179d; box-shadow: 5px 10px 8px hsl(241, 86%, 11%); background: transparent; background-image: none }",
      ".collection, .item { border: 1px dashed #2959c9; padding: 5px; margin-top: 5px; box-shadow: 5px 6px 8px #0d1f4885 }",
      `body.non-chromium {background: linear-gradient(to left, #0e052e, #1c1c1c);}`,
      "body {background: linear-gradient(to left, #0e052e, #1c1c1c);-webkit-background-clip: text;background-clip: text;color: lightskyblue;animation: body 10s ease-in-out infinite;background-size: 400% 100%;margin: 0; /* Remove default margin */padding: 0; /* Remove default padding */box-shadow: 5px 10px 8px hsl(241, 86%, 11%)}",
      "div {box-shadow: 5px 10px 8px hsl(241, 86%, 11%)}",
      "footer p { text-align: center; }",
  
      ".inbox{ background-color: #56209e43; color: rgb(147, 194, 255); border: 2px solid #4a297e; border-radius: 8px; }",
      ".inbox:hover{ border-color: #7426b3; }",
      ".inbox:focus{ outline: 2px solid #7426b3; font-weight:bold; color: rgb(147, 255, 194); }",
  
      ".button3{ background-color: #56209e43;color: rgb(147, 194, 255); border: 2px solid #4a297e; }",
      ".button3:hover{ border-color: lightblue; }",
      `
      .semishort:focus
      {
        color:lightblue;
        background-color: #42005c;
      }
      `,
  
      `
      .tick
      {
        accent-color: green;
      }
      `,
  
      `
      .tick:not(:checked)
      {
        -webkit-appearance: none;
        -moz-appearance: none;
        -o-appearance: none;
        appearance:none;
        width: 10px;
        height: 10px;
        background-color: rgb(171, 9, 9);
        border: 0px dotted #931414;
        color: red;
        content: "x";
      }
      `,
  `
  hr
  {
    background: linear-gradient(to right, #3b1194, #22095a);
    height: 5px;
    border:0
  }
  `,
  
  `
  a
  {
      text-align: center;
      color:rgb(162, 100, 237);
  }
  `,
  
  `
  a:hover
  {
      text-align: center;
      color:rgb(202, 165, 245);
  }
  `,
  
  `
  .frame
  {
    background-color: #56209e43;
    border: none;
    border-radius: 2px;
    color: rgb(22, 67, 127);
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    transition-duration: 0.4s;
  }
  `,
  
  `
  .frame:hover
  {
    background-color: #0e11106d; /* Green */
    color: white;
  }
  `,
  
  `
  .upload
  {
    background-color: #56209e43; /* Green */
    border: none;
    border-radius: 2px;
    color: rgb(147, 194, 255);
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    transition-duration: 0.4s;
  }
  `,
  
  `
  .upload:hover
  {
    background-color: #0e11106d; /* Green */
    color: white;
  }
  `,
  
  `
  .button1
  {
    background-color: #04AA6D; /* Green */
    border: none;
    border-radius: 2px;
    color: rgb(22, 67, 127);
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    transition-duration: 0.4s;
  }
  `,
  
  `
  .button1:hover {
    background-color: #0e1110; /* Green */
    color: white;
  }
  `,
  
  `
  .button2
  {
    background-color: #04AA6D;
    border: none;
    width: 120px;
    height: 60px;
    margin-top: 25px;
    border-radius: 2px;
    color: rgb(22, 67, 127);
    padding: 20px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    transition-duration: 0.4s;
  }
  `,
  
  `
  .button2:hover {
    background-color: #2f055f; /* Green */
    color: rgb(0, 146, 250);
  }
  `,
  
  `
  .tooltip .tooltiptext {
    width: 120px;
    top: 100%;
    left: 50%;
    margin-left: -60px; /* Use half of the width (120/2 = 60), to center the tooltip */
  }
  `,
  
  
  "h2 {text-align: center;}",
  
  
    ]
    changeItemTheme( datheme )
  }
  
  function bubbleTheme()
  {
    
    let datheme = 
    [
      ".box { border: 1px solid #cc30cf;box-shadow: 5px 10px 8px hsl(241, 86%, 11%); background: linear-gradient(to left, #f241c3, #f57ad4); background-image: url('https://images.pexels.com/photos/325526/pexels-photo-325526.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2') }",
      ".collection, .item { border: 1px dashed #FF59c9; padding: 5px; margin-top: 5px; box-shadow: 5px 6px 8px #AF29B9 }",
      "body {background: linear-gradient(to left, #dd42f5, #Fd62f5);-webkit-background-clip: text;background-clip: text;color: #4f136e;animation: body 0s ease-in-out infinite;background-size: 100% 100%;margin: 0; /* Remove default margin */padding: 0; /* Remove default padding */box-shadow: 5px 10px 8px #AF29B9 }",
      `body.non-chromium {background: linear-gradient(to left, #dd42f5, #Fd62f5);}`,
      "div {box-shadow: 5px 10px 8px #AF29B9}",
      "footer p { text-align: center; }",
  
      ".inbox{ background-color: rgb(240 120 219 / 94%); color: white; 2px solid rgb(152 73 133); border-radius: 8px; }",
      ".inbox:hover{ border-color: #7426b3; }",
      ".inbox:focus{ outline: 2px solid #4f136e; font-weight:bold; color: rgb(255 211 197); }",
  
      ".button3{ background-color: rgb(246 122 248);color: white; border: 2px solid rgb(192 43 156); }",
      ".button3:hover{ border-color: white; }",
      "::placeholder{ color:lightpink }",
  
      `
      .tick
      {
        accent-color: lightpink;
      }
      `,
  
      `
      .tick:not(:checked)
      {
        -webkit-appearance: none;
        -moz-appearance: none;
        -o-appearance: none;
        appearance:none;
        width: 10px;
        height: 10px;
        background-color: crimson;
        border: 0px dotted pink;
        color: pink;
        content: "x";
      }
      `,
  `
  hr
  {
    background: linear-gradient(to right, #8f2974, #f739c5);
    height: 5px;
    border:0
  }
  `,
  
    ]
    changeItemTheme( datheme )
  }
  
  function changeItemTheme( item )
  {
    const styleSheet = document.styleSheets[0];
    if( typeof( item ) == "object" )
    {
      for (let index = 0; index < item.length; ++index)
      {
        styleSheet.insertRule( item[index], styleSheet.cssRules.length );
      }
    }
    else
    styleSheet.insertRule( item, styleSheet.cssRules.length )
  }
  
  function sleep( ms )
  {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
  
  function getCookie( name )
  {
    const cookies = document.cookie.split( "; " );
    for ( const cookie of cookies )
    {
      const [ key, value ] = cookie.split( "=" );
      if ( key === name )
      {
        return value;
      }
    }
    return null;
  }
  
  function toggleMode()
  {
    isEditMode = !isEditMode;
    document.getElementById("mainBox").contentEditable = isEditMode ? "true" : "false";
  }
  
  function createBox()
  {
    document.getElementById("mainBox").classList.remove("hidden");
  }
  
  function updateImage( input, imageId )
  {
    const file = input.files[0];
    const reader = new FileReader();
    reader.onload = function(e)
    {
      document.getElementById(imageId).src = e.target.result;
    };
    if (file) reader.readAsDataURL(file);
  }
  
  function addCollection(data = null)
  {
    const container = document.createElement("div");
    container.classList.add("collection");
  
    const collectionImageId = `collectionImage${document.getElementsByClassName('collection').length}`;
    container.innerHTML = `
      <h4 contenteditable="true">${data ? data.title : 'Collection Title'}</h4>
      <p contenteditable="true">${data ? data.description : 'Collection Description'}</p>
      <img id="${collectionImageId}" src="${data ? data.image : '/Images/Icon/missing.gif'}" alt="Collection Image" width="128" height="128" class="frame">
      <br>
      <input type="file" onchange="updateImage(this, '${collectionImageId}')" class="upload"">
      <p contenteditable="true">${data ? data.credits : 'Collection Credits'}</p>
      <button class="button3" onclick="addItem(this)">Add Item</button>
      <div class="items-container hidden"></div>
      <span class="dropdown-arrow" onclick="toggleItemsVisibility(this)">&#9660;</span>`;
  
    const itemsContainer = container.querySelector(".items-container");
    if ( data && data.items )
    {
      data.items.forEach(item => addItem(container.querySelector('button'), item));
    }
  
    document.getElementById("collectionsContainer").appendChild(container);
  }
  
  function addItem(button, data = null)
  {
    const itemContainer = document.createElement("div");
    itemContainer.classList.add("item");
  
    itemContainer.innerHTML = `
      <label>Sound Name: <input type="text" value="${data ? data.soundName : ''}"class="inbox"></label>
      <label>Loop Start: <input type="number" value="${data ? data.loopStart : 0}"class="inbox short"></label>
      <label>Loop End: <input type="number" value="${data ? data.loopEnd : 0}"class="inbox short"></label>
      <label>Offset: <input type="number" value="${data ? data.offset : 0}"class="inbox short"></label>
      <label>Loop Type: 
        <select class = "inbox semishort">
          <option value="d0" ${data && data.loopType === 'd0' ? 'selected' : ''}>Loop</option>
          <option value="d1" ${data && data.loopType === 'd1' ? 'selected' : ''}>Ping Pong</option>
          <option value="d2" ${data && data.loopType === 'd2' ? 'selected' : ''}>Play Once</option>
          <option value="d3" ${data && data.loopType === 'd3' ? 'selected' : ''}>Loop Play Once</option>
        </select>
      </label>
      <label>Backwards: <input type="checkbox" ${data && data.backwards ? 'checked' : ''}class="tick"></label><br>
      <label>Link: <input type="text" placeholder="Enter item link" value="${data ? data.link : ''}"class="inbox"></label>
      <label> <input type="checkbox" ${data && data.export ? 'checked' : ''} class="hidden"></label>
    `;
  
    button.nextElementSibling.appendChild(itemContainer);
  }

function clearFileInput(id) 
{ 
    var oldInput = document.getElementById(id); 

    var newInput = document.createElement("input"); 

    newInput.type = "file"; 
    newInput.id = oldInput.id; 
    newInput.name = oldInput.name; 
    newInput.className = oldInput.className; 
    newInput.style.cssText = oldInput.style.cssText; 

    oldInput.parentNode.replaceChild(newInput, oldInput); 
}
  
  function uploadJSON()
  {
    document.getElementById("fileInput").click();
    document.getElementById("daclear").value = "";
    document.getElementById("fileInput").value = "";
  }

  function uploadJSONEdit()
  {
    document.getElementById("fileInputEdit").click();
    document.getElementById("fileInputEdit").value = "";
    document.getElementById("daclear2").value = "";
  }
  function loadJSON(files) 
  {
    const file = files[0];
    if (!file) return;
  
    const reader = new FileReader();
    reader.onload = function(e) {
      const data = JSON.parse(e.target.result);
      populateData(data);
    };
    reader.readAsText(file);
  }

  function loadJSONEdit(files) 
  {
    const file = files[0];
    if (!file) return;
  
    const reader = new FileReader();
    reader.onload = function(e) {
      const data = JSON.parse(e.target.result);
      populateDataEdit(data);
    };
    reader.readAsText(file);
  }


  
function populateDataEdit(jsonData)
{
  if (!jsonData)
  {
    alert("Invalid JSON format or missing data.");
    return;
  }

  const escapeHtml = (text) =>
  {
    if (!text) return text;
    return text
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;");
  };
  
  function replacer(data = null)
  {
    if (!data) return;
    data.title = escapeHtml(data.title);
    data.description = escapeHtml(data.description);
    data.credits = escapeHtml(data.credits);
  }
  const mainData = jsonData;

  document.getElementById("mainTitle").innerHTML = escapeHtml(mainData.title) || "Default Title";
  document.getElementById("mainCredits").innerHTML = escapeHtml(mainData.credits) || "This is where the credits go";
  document.getElementById("mainImage").src = mainData.image || "/Images/Icon/missing.gif";
  document.getElementById("mainTitle").contentEditable = true;
  document.getElementById("mainCredits").contentEditable = true;
  document.getElementById("buttonHide").classList.remove("hidden");
  const collectionsContainer = document.getElementById("collectionsContainer");
  collectionsContainer.innerHTML = "";

  if (mainData.collections && mainData.collections.length > 0)
  {
    mainData.collections.forEach(collectionData =>
    {
      replacer(collectionData);
      addCollection(collectionData);
    });
  }
}
  
  function populateData(jsonData) 
  {
    if (!jsonData) {
      alert("Invalid JSON format or missing data.");
      return;
    }
  
    const mainData = jsonData;
  
    document.getElementById("mainTitle").innerHTML = mainData.title || "Default Title";
    document.getElementById("mainImage").innerHTML = `<img src="${mainData.image || "/Images/Icon/missing.gif"}" alt="Main Image">`;
    document.getElementById("mainCredits").innerHTML = mainData.credits || "This is where the credits go";
    document.getElementById("mainTitle").contentEditable = false;
    document.getElementById("mainCredits").contentEditable = false;
    document.getElementById("buttonHide").classList.add("hidden");
  
    const collectionsContainer = document.getElementById("collectionsContainer");
    collectionsContainer.innerHTML = "";

  if (mainData.collections && mainData.collections.length > 0) {
    mainData.collections.forEach(collectionData => {
      const collectionElement = document.createElement("div");
      collectionElement.classList.add("collection");
  
      collectionElement.innerHTML = `
        <h4>${collectionData.title || "Collection Title"}</h4>
        <p>${collectionData.description || "Collection Description"}</p>
        <img src="${collectionData.image || "/Images/Icon/missing.gif"}" alt="Collection Image" width="128" height="128">
        <p>${collectionData.credits || "Collection Credits"}</p>
        <div class="items-container hidden"></div>
        <span class="dropdown-arrow" onclick="toggleItemsVisibility(this)">&#9660;</span>
      `;
  
      const itemsContainer = collectionElement.querySelector(".items-container");
      if (collectionData.items && collectionData.items.length > 0) {
        collectionData.items.forEach(item => {
          item.link = item.link.replace( /'/g, "%27" );
          const itemElement = document.createElement("div");
          itemElement.classList.add("item");
  
          itemElement.innerHTML = `
            <input class="button_sound inbox all${totalitems} everything collection_sound${totalitems}" type="text" value="${item.soundName || ''}" placeholder="Sound Name">
            <input class="button_loopstart inbox short all${totalitems} everything collection_loopstart${totalitems}" type="number" value="${item.loopStart || 0}" placeholder="Loop Start">
            <input class="button_loopend inbox short all${totalitems} everything collection_loopend${totalitems}" type="number" value="${item.loopEnd || 0}" placeholder="Loop End">
            <input class="button_offset inbox short all${totalitems} everything collection_offset${totalitems}" type="number" value="${item.offset || 0}" placeholder="Offset">
            <select class="button_loop inbox semishort all${totalitems} everything collection_loop${totalitems}">
              <option value="d0" ${item.loopType === 'd0' ? 'selected' : ''}>Loop</option>
              <option value="d1" ${item.loopType === 'd1' ? 'selected' : ''}>Ping Pong</option>
              <option value="d2" ${item.loopType === 'd2' ? 'selected' : ''}>Play Once</option>
              <option value="d3" ${item.loopType === 'd3' ? 'selected' : ''}>Loop Play Once</option>
            </select>
            <input class="button_backward tick all${totalitems} everything collection_backward${totalitems}" type="checkbox" ${item.backwards ? 'checked' : ''}> <knot class="button_backward all${totalitems} everything collection_backward${totalitems}">Backwards</knot>
            <input class="button_link inbox semishort all${totalitems} everything collection_link${totalitems}" type="text" value="${item.link || ''}" placeholder="Item Link">
            <input class="button_export tick checkbox all${totalitems} everything collection_export${totalitems}" type="checkbox" ${item.export ? 'checked' : ''}> Export

            <button onclick="unhide_elements( ${totalcontainers}, this, '${item.link}' )"class="inbox semishort">Play</button>
            <select id="Playful${totalcontainers}" class="hidden samplestuff${totalcontainers} Playful${totalcontainers} inbox semishort">
            <option value="1" selected>Once</option>
            <option value="2">Major</option>
            <option value="3">Minor</option>
            <option value="4">Diminished</option>
            <option value="5">Ascend</option>
            <option value="6">Descend</option>
            <option value="7">Appregio</option>
            <option value="8">Aggressive Appregio</option>
            </select>
            <label for="musical${totalcontainers}"></label>
            <input 
              type="number"
              min="12" 
              max="120" 
              value="60"
              id=musical${totalcontainers}
              class="hidden samplestuff${totalcontainers} musical${totalcontainers} inbox semishort supershort all${totalitems} everything"
              oninput="updateNote( this, ${totalcontainers} )">
            <b class="hidden noteDisplay${totalcontainers} inbox samplestuff${totalcontainers}">C4</b>
          `;

          itemsContainer.appendChild(itemElement);

          totalcontainers++;
        });
      }

      totalitems++;
  
      collectionsContainer.appendChild(collectionElement);
    });


      for (let index = 0; index < totalcontainers; index++)
      {
        const musics = document.getElementsByClassName(`musical${index}`);
        if (musics.length === 0) continue;
          
        musics[0].addEventListener("keydown", (e) =>
        {
          if (e.keyCode !== 38 && e.keyCode !== 40) e.preventDefault();
          musics[0].dataset.number = totalcontainers;
          console.log(`${musics[0].dataset.number}`);
        });
      }
    }
  }

  function unhide_elements(num, self, samplelink)
  {

  self.textContent = "WAIT";

  loadSample(samplelink)
    .then(sampleBuffer =>
    {
      self.textContent = "Play";
      self.onclick = () => soundplayer(num, sampleBuffer);
    })
    .catch(error =>
    {
      console.error("Error loading sample:", error);
      self.textContent = "Error";
    });

  const elements = document.getElementsByClassName(`samplestuff${num}`);
  for (let i = 0; i < elements.length; i++)
  {
    elements[i].classList.remove("hidden");
  }
}

async function soundplayer(num, sampleBuffer)
{
  const stopId = `musical${num}_stop`;
  const noteElement = document.getElementById(`musical${num}`);
  const funnynumber = document.getElementById(`Playful${num}`).value;
  stopSample(stopId);

  if(noteElement)
  {
    const noteToPlay = parseInt(noteElement.value, 10) || 60;
  switch(funnynumber)
  {
    case "1":
      playSample(sampleBuffer, 60, noteToPlay, stopId);
    break;
    case "2":
      playSample(sampleBuffer, 60, noteToPlay, stopId);
      playSample(sampleBuffer, 60, noteToPlay + 4, stopId);
      playSample(sampleBuffer, 60, noteToPlay + 7, stopId);
    break;
    case "3":
      playSample(sampleBuffer, 60, noteToPlay, stopId);
      playSample(sampleBuffer, 60, noteToPlay + 3, stopId);
      playSample(sampleBuffer, 60, noteToPlay + 7, stopId);
    break;
    case "4":
      playSample(sampleBuffer, 60, noteToPlay, stopId);
      playSample(sampleBuffer, 60, noteToPlay + 3, stopId);
      playSample(sampleBuffer, 60, noteToPlay + 6, stopId);
    break;
    case "5":
      for(let i = 0; i < 12; i++)
      {
        stopSample(stopId);
        playSample(sampleBuffer, 60, noteToPlay + i, stopId);
        await sleep(400);
      }
      stopSample(stopId);
      break;
      case "6":
      for(let i = 0; i < 12; i++)
      {
        stopSample(stopId);
        playSample(sampleBuffer, 60, noteToPlay - i, stopId);
        await sleep(400);
      }
      stopSample(stopId);
    break;
    case "7":
      for(let i = 0; i < 6; i++)
      {
        stopSample(stopId);
        playSample(sampleBuffer, 60, noteToPlay, stopId);
        await sleep(100);
        stopSample(stopId);
        playSample(sampleBuffer, 64, noteToPlay, stopId);
        await sleep(100);
        stopSample(stopId);
        playSample(sampleBuffer, 67, noteToPlay, stopId);
        await sleep(100);
        stopSample(stopId);
        playSample(sampleBuffer, 64, noteToPlay, stopId);
        await sleep(100);
      }
      stopSample(stopId);
    break;
    case "8":
    for(let i = 0; i < 9; i++)
      {
        stopSample(stopId);
        playSample(sampleBuffer, 60, noteToPlay, stopId);
        await sleep(50);
        stopSample(stopId);
        playSample(sampleBuffer, 64, noteToPlay, stopId);
        await sleep(50);
        stopSample(stopId);
        playSample(sampleBuffer, 67, noteToPlay, stopId);
        await sleep(50);
        stopSample(stopId);
        playSample(sampleBuffer, 64, noteToPlay, stopId);
        await sleep(50);
      }
      stopSample(stopId);
    break;
    default:
      console.log(funnynumber);
      break;

  }
}

}

  const notes = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
  function updateNote( daself, dacontainer )
    {
      const input = daself;
      const display = document.getElementsByClassName(`noteDisplay${dacontainer}`);
      const number = parseInt(input.value, 10);

      if ( number >= 12 && number <= 120 )
      {
        const noteIndex = ( number - 12 ) % 12;
        const octave = Math.floor( ( number - 12 ) / 12 );
        const note = notes[ noteIndex ] + octave;
        display[0].textContent = note;
      }
      else 
      {
        display[0].textContent = "Invalid input!";
      }
    }
  
  function downloadJSON() {
    const mainBox = {
      title: document.getElementById("mainTitle") ? document.getElementById("mainTitle").textContent : "Default Title",
      image: document.getElementById("mainImage") ? document.getElementById("mainImage").src : "/Images/Icon/missing.gif",
      credits: document.getElementById("mainCredits") ? document.getElementById("mainCredits").textContent : "This is where the credits go",
      collections: []
    };
  
    // Loop through all collections
    document.querySelectorAll('.collection').forEach(collection => {
      const collectionData = {
        title: collection.querySelector('h4') ? collection.querySelector('h4').textContent : "Collection Title",
        description: collection.querySelector('p:nth-of-type(1)') ? collection.querySelector('p:nth-of-type(1)').textContent : "Collection Description",
        image: collection.querySelector('img') ? collection.querySelector('img').src : "/Images/Icon/missing.gif",
        credits: collection.querySelector('p:nth-of-type(2)') ? collection.querySelector('p:nth-of-type(2)').textContent : "Collection Credits",
        items: []  // Initialize an empty array for items
      };
  
      // Loop through all items in the collection
      collection.querySelectorAll('.item').forEach(item => {
        const inputs = item.querySelectorAll('input');  // Get all inputs in the item
        const soundNameInput = inputs[0];  // First input for sound name
        const loopStartInput = inputs[1];  // Second input for loop start
        const loopEndInput = inputs[2];  // Third input for loop end
        const offsetInput = inputs[3];  // Fourth input for offset
        const loopTypeSelect = item.querySelector('select');  // Select for loop type
        const backwardsCheckbox = item.querySelector('input[type="checkbox"]');  // Checkbox for backwards
        const linkInput = inputs[5];  // Fifth input for link (assuming it's in the right order)
        const exportCheckbox = item.querySelector('input[type="checkbox"]:last-of-type');  // Export checkbox
  
        // Debugging: Log the inputs to see if they exist
        console.log("Sound Name:", soundNameInput ? soundNameInput.value : "Not found");
        console.log("Loop Start:", loopStartInput ? loopStartInput.value : "Not found");
        console.log("Loop End:", loopEndInput ? loopEndInput.value : "Not found");
        console.log("Offset:", offsetInput ? offsetInput.value : "Not found");
        console.log("Link:", linkInput ? linkInput.value : "Not found");
        console.log("Export:", exportCheckbox ? exportCheckbox.checked : "Not found");
  
        // Ensure loopStart, loopEnd, and offset have default values when they're missing
        const itemData = {
          soundName: soundNameInput ? soundNameInput.value : "",
          loopStart: loopStartInput ? parseInt(loopStartInput.value) || 0 : 0,
          loopEnd: loopEndInput ? parseInt(loopEndInput.value) || 0 : 0,
          offset: offsetInput ? parseInt(offsetInput.value) || 0 : 0,
          loopType: loopTypeSelect ? loopTypeSelect.value : 'd0',
          backwards: backwardsCheckbox ? backwardsCheckbox.checked : false,
          link: linkInput ? linkInput.value : '',
          export: exportCheckbox ? exportCheckbox.checked : false 
        };
  
        console.log("Item Data:", itemData);
  
        collectionData.items.push(itemData);
      });
  
      mainBox.collections.push(collectionData);
    });
  
    if (mainBox.collections.length === 0) {
      alert("No collections to export.");
      return;
    }
  
    const blob = new Blob([JSON.stringify(mainBox, null, 2)], { type: "application/json" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "data.json";
    link.click();
  }
  
  
  function Ultrabox()
  {
    document.getElementById("exportUrlInput").value = "https://ultraabox.github.io/testing/#u6N08Untitled00000n310s0k02l00e03t1Ua7g0fj07r1O_U00000000i0o321T1v0pu39f0000q0wB162110O01d080A0F0B0Q7er4Pa610R0000E3c0ba61a628T1v0pu63f0000q0wB171110O01d080A1F1B4Qa4i4Pea3bR0000E2c0b962aT6v0pu75f010n900q08420O0d030WO00h0E1c02cT2v0pu15f180q0040O0d030w0h0E0c0b4h400000000h4g000000014h000000004h400000000p16000000"
  }
  
  function Abyssbox()
  {
    document.getElementById("exportUrlInput").value = "https://choptop84.github.io/abyssbox-app/#a2N08UntitledY04nonen311s0k02l00e03t1Ua7g0fj07r3O_U0000000000i0o321T0v0pu86f0000q00000B1900Oa1d350w60h3y0000000000000g000000E1c0bcT5v0pulif031742e42k400q0000AD010q50002Q0Oa2ud880HU2h80000020p00h3E1c0c09T5v0pua5f060lc2dd2j02e02fd17800q00008540Oaad260HK_Sziiirrqih99h0E0c0T2v0pu15f180q0000040Oad030w0h0E0c0Tav0pu43f0000q0000w510Oa1d030E0c0b4h400000000h4g000000014h000000004h400000000h4g00000000p1900000f_M0"
  }
  
  function exportURLs() {
    const baseUrl = document.getElementById("exportUrlInput") ? document.getElementById("exportUrlInput").value : "";
    let exportStr = "";
  
    document.querySelectorAll('.collection .item').forEach(item => {
      const inputs = item.querySelectorAll('input');
      const inputz = item.querySelectorAll('.everything');
      const soundNameInput = inputz[0];
      const loopStartInput = inputz[1];
      const loopEndInput = inputz[2];
      const offsetInput = inputz[3];
      const loopTypeSelect = inputz[4];
      const backwardsCheckbox = inputz[5];
      const linkInput = inputz[7];
      const exportCheckbox = inputz[8];
  
      if (exportCheckbox && exportCheckbox.checked) {
        const soundName = encodeURIComponent(soundNameInput ? soundNameInput.value : '');
        const loopStart = loopStartInput ? parseInt(loopStartInput.value) || 0 : 0;
        const loopEnd = loopEndInput ? parseInt(loopEndInput.value) || 0 : 0;
        const offset = offsetInput ? parseInt(offsetInput.value) || 0 : 0;
        const loopType = loopTypeSelect ? loopTypeSelect.value : 'd0';
        const backwards = backwardsCheckbox && backwardsCheckbox.checked ? 1 : 0;
        const link = linkInput ? linkInput.value : '';
  
        const fullUrl = `|!a${loopStart},b${loopEnd},c${offset},${loopType}${backwards}!${link}`;
        exportStr += fullUrl;
      }
    });
  
    console.log(baseUrl + exportStr);
    window.location.href = baseUrl + exportStr;
  }
  
  
  
  function toggleItemsVisibility(arrow)
  {
    const itemsContainer = arrow.parentElement.querySelector(".items-container");
    if (itemsContainer.classList.contains("hidden"))
    {
      itemsContainer.classList.remove("hidden");
      arrow.innerHTML = "&#9650;";
    }
    else
    {
      itemsContainer.classList.add("hidden");
      arrow.innerHTML = "&#9660;";
    }
  }
  
  function sleep(ms) 
  {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
  
async function collisionEffect()
{
   const cressyKiss = document.getElementById('cressyKiss');
   const explosionSound = document.getElementById('explosionSound');
   const car = document.getElementById('car');
   car.volume = 0.2;
   explosionSound.volume = 0.2;
   const hotdog = document.getElementById('hotdog');
   const paras = document.querySelectorAll('.toUnhide');
   
   hotdog.remove();
   for (let i = 0; i < paras.length; i++)
  {
    paras[i].classList.remove('hidden');
    paras[i].style.opacity = 0;
  }

  paras[0].classList.remove('hidden');
  
  cressyKiss.classList.remove('hidden');
  
  cressyKiss.style.opacity = 0

  const videoLeft = document.createElement('video');
  videoLeft.src = '/Videos/Stumpy Sit.webm';
  videoLeft.width = 128;
  videoLeft.height = 128;
  videoLeft.muted = true;
  videoLeft.autoplay = true;
  videoLeft.style.position = 'fixed';
  videoLeft.style.left = '0px';
  videoLeft.style.bottom = '20px';
  
  const videoRight = document.createElement('video');
  videoRight.src = '/Videos/Rart.webm';
  videoRight.width = 512;
  videoRight.height = 512;
  videoRight.muted = true;
  videoRight.autoplay = true;
  videoRight.style.position = 'fixed';
  videoRight.style.right = '0px';
  videoRight.style.bottom = '-150px';
  
  document.body.appendChild(videoLeft);
  document.body.appendChild(videoRight);
  await sleep(1500);
  car.play();
  
  let currentbottom = 10;
  let currentbottom2 = -140;
  for (let step = 0; step <= 25; step++)
  {
    currentbottom += 10;
    currentbottom2 -= 10;
    videoLeft.style.bottom = `${currentbottom}px`;
    videoRight.style.bottom = `${currentbottom2}px`;
    await sleep( 75 );
    currentbottom -= 10;
    currentbottom2 += 10;
    videoLeft.style.bottom = `${currentbottom}px`;
    videoRight.style.bottom = `${currentbottom2}px`;
    await sleep( 75 );
  }
  videoLeft.style.bottom = `20px`;
  videoRight.style.bottom = `-150px`;

  const screenWidth = window.innerWidth;
  const totalSteps = 100;
  for (let step = 0; step <= totalSteps; step++)
  {
    const leftPosition = (screenWidth / 2 -180) * (step / totalSteps);
    const rightPosition = (screenWidth / 2 -180) * (step / totalSteps);
  
    videoLeft.style.left = `${leftPosition}px`;
    videoRight.style.right = `${rightPosition}px`;
  
    await sleep(20);
  }
  
  videoLeft.remove();
  videoRight.remove();
  
  const explosionImage = document.createElement('img');
  explosionImage.src = '/Images/Icon/explosion.gif';
  explosionImage.width = 512;
  explosionImage.height = 512;
  explosionImage.className = 'centered';
  document.body.appendChild(explosionImage);
  
  explosionSound.play();
  
  cressyKiss.classList.remove('hidden');
  cressyKiss.classList.add('visible');
  
  for(let index = 0; index < 20; ++index)
  {
    cressyKiss.style.opacity = 0.05 * index;
    await sleep( 25 );
  }
  await sleep( 3000 )
  explosionImage.remove();
  for(let index = 0; index < 20; ++index)
  {
    for (let i = 0; i < paras.length; i++)
    {
      paras[i].style.opacity = 0.05 * index;
    }
    await sleep( 25 );
  }
}
  let clicked = false;
  let clicked2 = false;
  document.getElementById('hotdog').addEventListener('click', function ()
  {
      collisionEffect();
  });

  document.getElementById('esc').addEventListener('click', function ()
  {
      relahMsg();
  });

  document.getElementById('cressyKiss').addEventListener('click', function ()
  {
    crescentclick();
  });

  document.getElementById('me').addEventListener('click', function ()
  {
    meclick();
  });

  document.getElementById('rart').addEventListener('click', function ()
  {
    rartclick();
  });

  document.getElementById('BDasher').addEventListener('click', function ()
  {
    operationExplodeTheCanadian();
  });

  document.getElementById('ppquill').addEventListener('click', function ()
  {
    mimi();
  });

function mimi()
{
  let Sound = document.getElementById('papamimi');
  Sound.volume = 0.35;
  Sound.play();
}

function crescentclick()
{
  let Sound = document.getElementById('crescentSong');
  Sound.volume = 0.35;
  Sound.play();
  const bulk = document.getElementById('linkofbulk');
  bulk.classList.remove('hidden');
}

function meclick()
{
  let Sound = document.getElementById('angrySong');
  Sound.volume = 0.35;
  Sound.play();
}

function rartclick()
{
  let Sound = document.getElementById('rartSong');
  Sound.volume = 0.35;
  Sound.play();
}

async function operationExplodeTheCanadian()
{
  if( clicked2 )
  {
    return
  }
  clicked2 = true;
  let SPLOOGE = document.getElementById('BDasher');
  let SPLOOGE2 = document.getElementById('WAHH');
  let SPLOOGE3 = document.getElementById('explosionSound');
  SPLOOGE2.volume = .25;
  SPLOOGE2.play();
  await sleep(900);
  SPLOOGE3.play();
  SPLOOGE.src = '/Images/Icon/explosion.gif'
  SPLOOGE.remove;
}


async function relahMsg()
{
  if( clicked )
  {
    randomAwooferEvent();
    return
  }
  else
    clicked = true;
    const rama = document.getElementById('console');
    rama.classList.remove('hidden');
    const relahSound = document.getElementById('relahSong');
    relahSound.volume = 0.35;
    relahSound.play();

  let relahmsg1 = 
[
"___________________-`_________________________________________",
"__________________.o+`________________________________________",
"_________________`ooo/________________________________________",
"________________`+oooo:_______________________________________",
"_______________`+oooooo:______________________________________",
"_______________-+oooooo+:_____________________________________",
"_____________`/:-:++oooo+:____________________________________",
"____________`/++++/+++++++:___________________________________",
"___________`/++++++++++++++:__________________________________",
"__________`/+++ooooooooooooo/`________________________________",
"_________./ooosssso++osssssso+`_______________________________",
"________.oossssso-````/ossssss+`______________________________",
"_______-osssssso.______:ssssssso._____________________________",
"______:osssssss/________osssso+++.____________________________",
"_____/ossssssss/________+ssssooo/-____________________________",
"___`/ossssso+/:-________-:/+osssso+-__________________________",
"__`+sso+:-`_________________`.-/+oso:_________________________",
"_`++:.___________________________`-/+/________________________",
"_.`_________________________________`_________________________",

"**************************************************************",
"**************************************************************",
"**************************************************************",
"**************************************************************",
"**************************************************************",


"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|----------------------------------------|",
"o\\/\\/\\/\\/\\/\\/\\/\\/\\/o|-Name:J0w03L----------------------------|",
"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|-Alias:Relah(Species:Arcanine)----------|",
"o\\/\\/\\/\\/\\/\\/\\/\\/\\/o|-Occupation:Borf,Bork,RUH---------------|",
"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|-Mail:----------------------------------|",
"o\\/\\/\\/\\/\\/\\/\\/\\/\\/o|-Relah_the_awoofer_is_a_very_friendly---|",
"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|-fluffy_MF_who_I_am_happy_to_befriend.--|",
"o\\/\\/\\/\\/\\/\\/\\/\\/\\/o|-He(Or_she_if_Relah)_is_a_talented------|",
"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|-coder._They_work_on_COSMOS_with_me_and-|",
"o\\/\\/\\/\\/\\/\\/\\/\\/\\/o|-Quill_and_the_others,_and_they_both_do-|",
"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|-not_cheat_to_abuse_games_and_genuinely-|",
"o\\/\\/\\/\\/\\/\\/\\/\\/\\/o|-are_passionate_in_what_they_do._Thank--|",
"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|-you_so_much_for_being_so_kind_to_me!---|",
"o\\/\\/\\/\\/\\/\\/\\/\\/\\/o|-Strangers_in_a_TF2_xbox_discord_to-----|",
"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|-great_friends!_Making_my_life_better---|",
"o\\/\\/\\/\\/\\/\\/\\/\\/\\/o|-one_bork_at_a_time---------------------|",
"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|-----------------------Thank_you,-------|",
"o\\/\\/\\/\\/\\/\\/\\/\\/\\/o|-----------------------From_My_Heart:---|",
"o/\\/\\/\\/\\/\\/\\/\\/\\/\\o|-----------------------Twitch_Kat!------|",
]

for(let index = 0; index < relahmsg1.length; ++index)
  {
    await printOut( relahmsg1[index] + "\n" );
  }
}


function randomAwooferEvent()
{
    let Sound1 = document.getElementById('woof1');
    let Sound2 = document.getElementById('woof2');
    let Sound3 = document.getElementById('woof3');
    Sound1.volume = 0.35;
    Sound2.volume = 0.35;
    Sound3.volume = 0.35;
  let x = Math.floor((Math.random() * 3) + 1);
  switch( x )
  {
    case 1:
      Sound1.play();
    break;
    case 2:
      Sound2.play();
    break;
    case 3:
      Sound3.play();
    break;
  }

}


  </script>

</body>
</html>
